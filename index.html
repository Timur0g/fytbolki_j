<html><head><meta charset='UTF-8'><style> *{font-family:Arial;} body {font-size:18px;background-color:#fff;border-collapse:collapse;border:none;margin:0;padding:0;border:0;border-spacing:0px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style></head><body><div id='tuesday' style='width:100%;height:100vh;'> </div><script type='text/javascript'>let story_json=new Array;var tuesday=document.getElementById("tuesday"),tue_text_view,tue_text_block,tue_text_element,tue_name_block=document.createElement("div"),languare,scene=0,dialog=0,dialog_text,dialog_speed=50,dialog_letter=0,dialog_timeout,tue_story,tue_bg_music,tue_fullScreen=!1,arr_dialog,timers;function cmenu(){return!1}function get_lang(){var e;languare=null!=navigator.languages?navigator.languages[0].substring(0,2):navigator.languagesubstring(0,2);for(var t=0;t<story_json.parameters.languares.length;t++)languare==story_json.parameters.languares[t]&&(e=!0);e||(languare=story_json.parameters.languares[0])}function load_story(e,t){if("data"==e)story_json=t,base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound();else if("file"==e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||0==this.status)){try{story_json=JSON.parse(this.responseText)}catch(e){this.status>0&&alert("Json structure error")}base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound()}},a.open("GET",t,!0),a.send(),a.onerror=function(){0==this.status&&alert("Error load json file Cross-Origin Resource Sharing(CORS)")}}}function name_block_update(){story_json.parameters.name_panel.color&&(tue_name_block.style.backgroundColor=story_json.parameters.name_panel.color),story_json.parameters.name_panel.color_text?tue_name_block.style.color=story_json.parameters.name_panel.color_text:tue_name_block.style.color=story_json.parameters.text_panel.color_text,tue_name_block.style.position="absolute",tue_name_block.id="tue_name_block",tue_name_block.style.padding=story_json.parameters.name_panel.indent_text,tue_name_block.style.fontSize=story_json.parameters.name_panel.size_text,tue_name_block.style.fontFamily=story_json.parameters.name_panel.font_family?story_json.parameters.name_panel.font_family:story_json.parameters.font,tue_name_block.style.textAlign="center",(tue_name_block.style.width=0!=story_json.parameters.name_panel.size[0])&&(tue_name_block.style.width=story_json.parameters.name_panel.size[0]),tue_name_block.style.height=story_json.parameters.name_panel.size[1],tue_name_block.style.lineHeight=story_json.parameters.name_panel.size[1],0!=story_json.parameters.name_panel.position[0]&&(tue_name_block.style.left=story_json.parameters.name_panel.position[0]),0!=story_json.parameters.name_panel.position[1]&&(tue_name_block.style.right=story_json.parameters.name_panel.position[1]),0!=story_json.parameters.name_panel.position[2]&&(tue_name_block.style.top=story_json.parameters.name_panel.position[2]),0!=story_json.parameters.name_panel.position[3]&&(tue_name_block.style.bottom=story_json.parameters.name_panel.position[3]),tue_name_block.style.zIndex=1001}function base_creation(){if(get_lang(),story_json.parameters.style_file&&add_style(story_json.parameters.style_file),dialog_speed=story_json.parameters.text_panel.dialog_speed,story_json.parameters.title&&(story_json.parameters.title[languare]?document.title=story_json.parameters.title[languare]:document.title=story_json.parameters.title),tuesday.style.backgroundRepeat="no-repeat",tuesday.style.backgroundPosition="center",tuesday.style.position="relative",tuesday.style.overflow="hidden",tuesday.innerHTML="<table id='tue_text_block' align='center'><tbody><tr><td id='tue_text_element'><div id='tue_text_view'></div></td></tr></tbody></table>",tue_text_block=document.getElementById("tue_text_block"),(tue_text_element=document.getElementById("tue_text_element")).style.position="relative",story_json.parameters.text_panel.className&&(tue_text_block.className=story_json.parameters.text_panel.className),story_json.parameters.text_panel.style&&(tue_text_block.style=story_json.parameters.text_panel.style),tue_text_block.style.position="absolute",story_json.parameters.text_panel.size&&(tue_text_block.style.width=story_json.parameters.text_panel.size[0],tue_text_block.style.height=story_json.parameters.text_panel.size[1]),story_json.parameters.text_panel.position?(tue_text_block.style.left=0!=story_json.parameters.text_panel.position[0]?story_json.parameters.text_panel.position[0]:"0",tue_text_block.style.right=0!=story_json.parameters.text_panel.position[1]?story_json.parameters.text_panel.position[1]:"0",0!=story_json.parameters.text_panel.position[2]&&(tue_text_block.style.top=story_json.parameters.text_panel.position[2]),0!=story_json.parameters.text_panel.position[3]&&(tue_text_block.style.bottom=story_json.parameters.text_panel.position[3])):(tue_text_block.style.left="0",tue_text_block.style.right="0"),story_json.parameters.text_panel.indent_bottom&&(tue_text_block.style.bottom=story_json.parameters.text_panel.indent_bottom),tue_text_block.style.zIndex=1e3,tue_text_block.style.borderSpacing=0,(tue_text_view=document.getElementById("tue_text_view")).style.boxSizing="border-box",tue_text_view.style.padding=story_json.parameters.text_panel.indent_text,tue_text_view.style.fontSize=story_json.parameters.text_panel.size_text,tue_text_view.style.fontFamily=story_json.parameters.text_panel.font_family?story_json.parameters.text_panel.font_family:story_json.parameters.font,tue_text_view.style.height="100%",story_json.parameters.name_panel&&(story_json.parameters.name_panel.className&&(tue_name_block.className=story_json.parameters.name_panel.className),story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style),tue_text_element.appendChild(tue_name_block),name_block_update()),(tue_bg_music=document.createElement("AUDIO")).id="tue_bg_music",tuesday.appendChild(tue_bg_music),story_json.parameters.launch_story)tue_story=story_json.parameters.launch_story;else for(var e=0;e<2;e++)if("parameters"!=Object.getOwnPropertyNames(story_json)[e]){story_json.parameters.launch_story=Object.getOwnPropertyNames(story_json)[1],tue_story=story_json.parameters.launch_story;break}function t(e,t){(t=document.getElementById(t)).style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center",e.art&&(t.style.backgroundImage="url('"+art_data(e.art)+"')"),e.art_size&&("patch"==e.art_size&&(t.style.backgroundImage="none"),"object"==typeof e.art_size?t.style.backgroundSize=e.art_size[0]+" "+e.art_size[1]:"patch"==e.art_size?(t.style.backgroundImage="none",t.style.backgroundSize="none",t.style.backgroundClip="padding-box",t.style.borderStyle="solid",t.style.borderWidth=e.patch[0]+"px "+e.patch[1]+"px "+e.patch[2]+"px "+e.patch[3]+"px",t.style.borderImage="url('"+art_data(e.art)+"') "+e.patch[0]+" "+e.patch[1]+" "+e.patch[2]+" "+e.patch[3]+" stretch stretch"):t.style.backgroundSize=e.art_size)}t(story_json.parameters.name_panel,"tue_name_block"),t(story_json.parameters.text_panel,"tue_text_block"),tuesday.dispatchEvent(new Event("script_executed")),localStorage.getItem(story_json.parameters.autosave)&&(story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_auto_data"))),creation_buttons(),creation_scene()}function creation_buttons(){for(i=0;i<story_json.parameters.buttons.length;i++){var e=document.createElement("div"),t="";story_json.parameters.buttons[i].sound&&(t+=story_json.parameters.buttons[i].sound?get_sound(story_json.parameters.buttons[i].sound):(story_json.parameters.buttons[i].sound_stop?";"+get_stop_sound(story_json.parameters.buttons[i].sound_stop):"")+";"),story_json.parameters.buttons[i].js&&(t+=story_json.parameters.buttons[i].js),e.setAttribute("onclick",t+";"),story_json.parameters.buttons[i].className&&(e.className=story_json.parameters.buttons[i].className),story_json.parameters.buttons[i].style&&(e.style=story_json.parameters.buttons[i].style),story_json.parameters.buttons[i].text&&("object"!=typeof story_json.parameters.buttons[i].text||story_json.parameters.buttons[i].text[languare]&&"object"!=typeof story_json.parameters.buttons[i].text[languare])&&(e.innerHTML=values_button(art_data(story_json.parameters.buttons[i].text)),e.style.padding=story_json.parameters.buttons[i].indent_text,e.style.display="flex",e.style.justifyContent=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[0]:"center",e.style.alignItems=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[1]:"center",e.style.color=story_json.parameters.buttons[i].color_text,e.style.fontSize=story_json.parameters.buttons[i].size_text,e.style.fontFamily=story_json.parameters.buttons[i].font_family?story_json.parameters.buttons[i].font_family:story_json.parameters.font),e.style.zIndex=2e3+i,e.id=story_json.parameters.buttons[i].name,e.classList.add("tue_controll"),e.style.position="absolute",e.style.width=story_json.parameters.buttons[i].size[0],e.style.height=story_json.parameters.buttons[i].size[1],e.style.backgroundColor=story_json.parameters.buttons[i].color,e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",story_json.parameters.buttons[i].art&&(e.style.backgroundImage="url('"+art_data(story_json.parameters.buttons[i].art)+"')"),story_json.parameters.buttons[i].art_size&&("patch"==story_json.parameters.buttons[i].art_size&&(e.style.backgroundImage="none"),"object"==typeof story_json.parameters.buttons[i].art_size?e.style.backgroundSize=story_json.parameters.buttons[i].art_size[0]+" "+story_json.parameters.buttons[i].art_size[1]:"patch"==story_json.parameters.buttons[i].art_size?(e.style.backgroundImage="none",e.style.backgroundSize="none",e.style.backgroundClip="padding-box",e.style.borderStyle="solid",e.style.borderWidth=story_json.parameters.buttons[i].patch[0]+"px "+story_json.parameters.buttons[i].patch[1]+"px "+story_json.parameters.buttons[i].patch[2]+"px "+story_json.parameters.buttons[i].patch[3]+"px",e.style.borderImage="url('"+art_data(story_json.parameters.buttons[i].art)+"') "+story_json.parameters.buttons[i].patch[0]+" "+story_json.parameters.buttons[i].patch[1]+" "+story_json.parameters.buttons[i].patch[2]+" "+story_json.parameters.buttons[i].patch[3]+" stretch stretch"):e.style.backgroundSize=story_json.parameters.buttons[i].art_size),0!=story_json.parameters.buttons[i].position[0]&&(e.style.left=story_json.parameters.buttons[i].position[0]),0!=story_json.parameters.buttons[i].position[1]&&(e.style.right=story_json.parameters.buttons[i].position[1]),0!=story_json.parameters.buttons[i].position[2]&&(e.style.top=story_json.parameters.buttons[i].position[2]),0!=story_json.parameters.buttons[i].position[3]&&(e.style.bottom=story_json.parameters.buttons[i].position[3]),tuesday.appendChild(e)}if(document.getElementById("tue_next")&&document.getElementById("tue_next").addEventListener("click",function(){go_story()}),document.getElementById("tue_back")&&document.getElementById("tue_back").addEventListener("click",function(){back_story()}),document.getElementById("tue_home")){var a=story_json.parameters.launch_story;document.getElementById("tue_home").addEventListener("click",function(){go_to(a)})}document.getElementById("tue_save")&&document.getElementById("tue_save").addEventListener("click",function(){save_stag("bookmark")}),document.getElementById("tue_load")&&document.getElementById("tue_load").addEventListener("click",function(){load_stag("bookmark")}),document.getElementById("tue_fullScreen")&&document.getElementById("tue_fullScreen").addEventListener("click",function(){full_screen()})}function creation_scene(){if(arr_dialog=story_json[tue_story][scene],del_element("tue_html_scene"),arr_dialog.legacy_choice)for(var e=0;e<arr_dialog.legacy_choice.length;e++){var t=arr_dialog.legacy_choice[e][0],a=arr_dialog.legacy_choice[e][1],o=arr_dialog.legacy_choice[e][2],r=arr_dialog.legacy_choice[e][3];if(">"==a&&story_json.parameters.variables[t]>o){go_to(r);break}if("<"==a&&story_json.parameters.variables[t]<o){go_to(r);break}if("="==a&&story_json.parameters.variables[t]==o){go_to(r);break}if(arr_dialog.legacy_choice[e].go_to){go_to(arr_dialog.legacy_choice[e].go_to);break}e==arr_dialog.legacy_choice.length-1&&(scene++,dialog=0,creation_scene())}var s;(tuesday.style.backgroundSize=arr_dialog.background_size?arr_dialog.background_size:"cover",arr_dialog.background_class?tuesday.className=arr_dialog.background_class:tuesday.className="",arr_dialog.background_color&&(tuesday.style.backgroundColor=arr_dialog.background_color),arr_dialog.background_image&&(tuesday.style.backgroundImage="url('"+art_data(arr_dialog.background_image)+"')"),document.getElementById("tue_home")&&(tue_story==story_json.parameters.launch_story?document.getElementById("tue_home").style.visibility="hidden":document.getElementById("tue_home").style.visibility="visible"),arr_dialog.html)&&(arr_dialog.html[languare]?((s=document.createElement("div")).className="tue_html_scene",s.innerHTML=arr_dialog.html[languare],tuesday.appendChild(s)):((s=document.createElement("div")).className="tue_html_scene",s.innerHTML=arr_dialog.html,tuesday.appendChild(s)));arr_dialog.background_music&&search_music(),arr_dialog.dialogs&&arr_dialog.dialogs.length>0?creation_dialog():(del_element("tue_art"),del_element("tue_choice"),del_element("tue_html_dialog"),tue_text_block.style.visibility="hidden")}function creation_dialog(){if(arr_dialog=story_json[tue_story][scene].dialogs[dialog],scene!=story_json[tue_story].length-1||dialog!=story_json[tue_story][scene].dialogs.length-1||arr_dialog.go_to?document.getElementById("tue_next").style.visibility="visible":document.getElementById("tue_next").style.visibility="hidden",0!=scene||0!=dialog||arr_dialog.back_to?document.getElementById("tue_back").style.visibility="visible":document.getElementById("tue_back").style.visibility="hidden","hidden"==arr_dialog.controll)for(var buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll"),i=0;i<buttons.length;i++)buttons[i].style.visibility="hidden";else if("visible"==arr_dialog.controll)for(var buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll"),i=0;i<buttons.length;i++)buttons[i].style.visibility="visible";if(arr_dialog.text&&""!=arr_dialog.text&&""!=arr_dialog.text[languare]?(tue_text_block.style.visibility="visible",tue_text_view.innerHTML="",values_in_text(!1),clearTimeout(dialog_timeout),anim_text(),arr_dialog.text.className&&(tue_text_block.className=arr_dialog.text.className),arr_dialog.text.style&&(tue_text_block.style=arr_dialog.text.style)):arr_dialog.text_add&&""!=arr_dialog.text_add&&""!=arr_dialog.text_add[languare]?(tue_text_block.style.visibility="visible",tue_text_view.innerHTML="",values_in_text(!0),clearTimeout(dialog_timeout),anim_text()):tue_text_block.style.visibility="hidden",arr_dialog.color?tue_text_block.style.backgroundColor=arr_dialog.color:story_json.parameters.text_panel.color&&(tue_text_block.style.backgroundColor=story_json.parameters.text_panel.color),arr_dialog.color_text?tue_text_view.style.color=arr_dialog.color_text:story_json.parameters.text_panel.color_text&&(tue_text_view.style.color=story_json.parameters.text_panel.color_text),arr_dialog.name?(arr_dialog.name[languare]?(arr_dialog.name.style?(tue_name_block.style=arr_dialog.name.style,name_block_update()):story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style,name_block_update()),tue_name_block.innerHTML=arr_dialog.name[languare],tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):story_json.parameters.characters?story_json.parameters.characters[arr_dialog.name]?(story_json.parameters.characters[arr_dialog.name].style?(tue_name_block.style=story_json.parameters.characters[arr_dialog.name].style,name_block_update()):story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style,name_block_update()),tue_name_block.innerHTML=story_json.parameters.characters[arr_dialog.name][languare],tue_name_block.style.backgroundColor=story_json.parameters.characters[arr_dialog.name].color,tue_name_block.style.color=story_json.parameters.characters[arr_dialog.name].color_text,story_json.parameters.characters[arr_dialog.name].className&&(tue_name_block.className=story_json.parameters.characters[arr_dialog.name].className)):(tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.visibility="visible"):tue_name_block.style.visibility="hidden",arr_dialog.video){var video=document.getElementById("tue_video");video||(video=document.createElement("video"),video.id="tue_video",video.classList.add("tue_v")),arr_dialog.video.style?video.style=arr_dialog.video.style:video.style="",arr_dialog.video.className&&(video.style=arr_dialog.video.className+" tue_v"),video.style.position="absolute",video.setAttribute("onloadedmetadata",""),video.src=art_data(arr_dialog.video.url),video.style.left="50%",video.style.top="50%",video.style.transform="translate(-50%,-50%)",arr_dialog.video.fit&&("contain"==arr_dialog.video.fit?(video.style.width="100%",video.style.height="100%"):"position"==arr_dialog.video.fit&&(video.style.transform="none",video.style.width=arr_dialog.video.size[0],video.style.height=arr_dialog.video.size[1],0!=arr_dialog.video.position[0]&&(video.style.left=arr_dialog.video.position[0]),0!=arr_dialog.video.position[1]&&(video.style.right=arr_dialog.video.position[1]),0!=arr_dialog.video.position[2]&&(video.style.top=arr_dialog.video.position[2]),0!=arr_dialog.video.position[3]&&(video.style.bottom=arr_dialog.video.position[3]))),arr_dialog.video.loop?video.loop=arr_dialog.video.loop:video.loop=!1,arr_dialog.video.sound&&arr_dialog.video.sound>0?(video.muted=!1,video.volume=arr_dialog.video.sound/100):video.muted=!0,arr_dialog.video.time_start&&(video.onloadedmetadata=function(){this.currentTime=arr_dialog.video.time_start,arr_dialog.video.fit&&"cover"!=arr_dialog.video.fit||video_size(),arr_dialog.video.stop&&this.pause()}),arr_dialog.video.time_end?arr_dialog.video.loop?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.currentTime=arr_dialog.video.time_start?arr_dialog.video.time_start:0)}:arr_dialog.video.go_to?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.pause(),"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to))}:video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&video.pause()}:video.onended=function(){"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to)},arr_dialog.video.stop&&1==arr_dialog.video.stop||(video.autoplay=!0),tuesday.appendChild(video),"cover"!=arr_dialog.video.fit&&arr_dialog.video.fit||video_size()}else del_element("tue_v");if(arr_dialog.art){var old=document.getElementById("tuesday").getElementsByClassName("tue_art"),src=!1;if(old.length>0){for(d=0;d<old.length;d++)old[d].classList.add("img_del");for(i=0;i<arr_dialog.art.length;i++){for(src=!1,o=0;o<old.length;o++)if(arr_dialog.art[i].url==old[o].getAttribute("volume")||arr_dialog.art[i].url[languare]==old[o].getAttribute("volume")){arr_dialog.art[i].style&&(old[o].style=arr_dialog.art[i].style),arr_dialog.art[i].move&&0!=arr_dialog.art[i].move?(old[o].style.transitionDuration=arr_dialog.art[i].move+"s",arr_dialog.art[i].speed&&""!=arr_dialog.art[i].speed?old[o].style.transitionTimingFunction=arr_dialog.art[i].speed:old[o].style.transitionTimingFunction=null):(old[o].style.transitionDuration=null,old[o].style.transitionTimingFunction=null),arr_dialog.art[i].opacity?old[o].style.opacity=arr_dialog.art[i].opacity:old[o].style.opacity=null,arr_dialog.art[i].fit&&(old[o].style.objectFit=arr_dialog.art[i].fit),arr_dialog.art[i].size&&(old[o].style.width=arr_dialog.art[i].size[0],old[o].style.height=arr_dialog.art[i].size[1]),0!=arr_dialog.art[i].position[0]&&(old[o].style.left=arr_dialog.art[i].position[0]),0!=arr_dialog.art[i].position[1]&&(old[o].style.left="calc(100% - "+arr_dialog.art[i].position[1]+" - "+arr_dialog.art[i].size[0]+")"),0!=arr_dialog.art[i].position[2]&&(old[o].style.top=arr_dialog.art[i].position[2]),0!=arr_dialog.art[i].position[3]&&(old[o].style.top="calc(100% - "+arr_dialog.art[i].position[3]+" - "+arr_dialog.art[i].size[1]+")"),src=!0,old[o].classList.remove("img_del");break}0==src&&creation_art(i)}del_element("img_del")}else for(i=0;i<arr_dialog.art.length;i++)creation_art(i);function creation_art(e){var t=document.createElement("img");t.src=art_data(arr_dialog.art[e].url),t.setAttribute("volume",arr_dialog.art[e].url[languare]?arr_dialog.art[e].url[languare]:arr_dialog.art[e].url),t.classList.add("tue_art"),t.style="user-select:text;"+(arr_dialog.art[e].style?arr_dialog.art[e].style:""),t.style.position="absolute",arr_dialog.art[e].fit&&(t.style.objectFit=arr_dialog.art[e].fit),arr_dialog.art[e].opacity?t.style.opacity=arr_dialog.art[e].opacity:t.style.opacity=null,arr_dialog.art[e].size&&(t.style.width=arr_dialog.art[e].size[0],t.style.height=arr_dialog.art[e].size[1]),0!=arr_dialog.art[e].position[0]&&(t.style.left=arr_dialog.art[e].position[0]),0!=arr_dialog.art[e].position[1]&&(t.style.left="calc(100% - "+arr_dialog.art[e].position[1]+" - "+arr_dialog.art[e].size[0]+")"),0!=arr_dialog.art[e].position[2]&&(t.style.top=arr_dialog.art[e].position[2]),0!=arr_dialog.art[e].position[3]&&(t.style.top="calc(100% - "+arr_dialog.art[e].position[3]+" - "+arr_dialog.art[e].size[1]+")"),t.setAttribute("draggable","false"),tuesday.appendChild(t)}}else del_element("tue_art");var button_ui=document.getElementsByClassName("tue_controll");for(i=0;i<button_ui.length;i++)button_ui[i].innerHTML=values_button(art_data(story_json.parameters.buttons[i].text));if(arr_dialog.choice)for(tue_next.style.visibility="hidden",i=0;i<arr_dialog.choice.length;i++){var choice=document.createElement("div");arr_dialog.choice[i].className&&(choice.className=arr_dialog.choice[i].className),arr_dialog.choice[i].style&&(choice.style=arr_dialog.choice[i].style),choice.classList.add("tue_choice"),choice.style.position="absolute",choice.style.backgroundColor=arr_dialog.choice[i].color,choice.style.backgroundRepeat="no-repeat",choice.style.backgroundPosition="center",arr_dialog.choice[i].art&&(choice.style.backgroundImage="url('"+art_data(arr_dialog.choice[i].art)+"')"),arr_dialog.choice[i].size&&(0!=arr_dialog.choice[i].size[0]&&(choice.style.width=arr_dialog.choice[i].size[0]),0!=arr_dialog.choice[i].size[1]&&(choice.style.height=arr_dialog.choice[i].size[1])),arr_dialog.choice[i].art_size&&("patch"==arr_dialog.choice[i].art_size&&(choice.style.backgroundImage="none"),"object"==typeof arr_dialog.choice[i].art_size?choice.style.backgroundSize=arr_dialog.choice[i].art_size[0]+" "+arr_dialog.choice[i].art_size[1]:"patch"==arr_dialog.choice[i].art_size?(choice.style.backgroundImage="none",choice.style.backgroundSize="none",choice.style.backgroundClip="padding-box",choice.style.borderStyle="solid",choice.style.borderWidth=arr_dialog.choice[i].patch[0]+"px "+arr_dialog.choice[i].patch[1]+"px "+arr_dialog.choice[i].patch[2]+"px "+arr_dialog.choice[i].patch[3]+"px",choice.style.borderImage="url('"+art_data(arr_dialog.choice[i].art)+"') "+arr_dialog.choice[i].patch[0]+" "+arr_dialog.choice[i].patch[1]+" "+arr_dialog.choice[i].patch[2]+" "+arr_dialog.choice[i].patch[3]+" stretch stretch"):choice.style.backgroundSize=arr_dialog.choice[i].art_size),0!=arr_dialog.choice[i].position[0]&&(choice.style.left=arr_dialog.choice[i].position[0]),0!=arr_dialog.choice[i].position[1]&&(choice.style.right=arr_dialog.choice[i].position[1]),0!=arr_dialog.choice[i].position[2]&&(choice.style.top=arr_dialog.choice[i].position[2]),0!=arr_dialog.choice[i].position[3]&&(choice.style.bottom=arr_dialog.choice[i].position[3]),choice.style.color=arr_dialog.choice[i].color_text,choice.style.padding=arr_dialog.choice[i].indent_text,choice.style.fontSize=arr_dialog.choice[i].size_text,choice.style.fontFamily=arr_dialog.choice[i].font_family?arr_dialog.choice[i].font_family:story_json.parameters.font,choice.style.display="flex",choice.style.justifyContent=arr_dialog.choice[i].align?arr_dialog.choice[i].align[0]:"center",choice.style.alignItems=arr_dialog.choice[i].align?arr_dialog.choice[i].align[1]:"center",choice.style.zIndex=1001+i,arr_dialog.choice[i].text&&("object"!=typeof arr_dialog.choice[i].text||arr_dialog.choice[i].text[languare]&&"object"!=typeof arr_dialog.choice[i].text[languare])&&(choice.innerHTML=values_button(art_data(arr_dialog.choice[i].text)));var v="";if(arr_dialog.choice[i].variables)for(var g=0;g<arr_dialog.choice[i].variables.length;g++)"add"==arr_dialog.choice[i].variables[g][1]?v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"+="+("number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";":"set"==arr_dialog.choice[i].variables[g][1]&&(v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"="+("number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";");if(arr_dialog.choice[i].js&&(v+=arr_dialog.choice[i].js+";"),arr_dialog.choice[i].go_to){var g=arr_dialog.choice[i].go_to;"tue_go"==g?choice.setAttribute("onclick","del_element('tue_choice'); "+v+"go_story(true);"+add_sound()):"tue_load_autosave"==g?choice.setAttribute("onclick",v+"load_stag('auto');"+add_sound()):"load"==g||"tue_load"==g?choice.setAttribute("onclick",v+"load_stag('bookmark');"+add_sound()):"tue_save"==g?choice.setAttribute("onclick",v+"save_stag('bookmark');"+add_sound()):"tue_no"==g||""==g?choice.setAttribute("onclick",v):"tue_fullScreen"==g?choice.setAttribute("onclick",v+"full_screen();"):"tue_home"==g?choice.setAttribute("onclick",v+'document.getElementById("tue_home").addEventListener("click",function(){go_to("'+story_json.parameters.launch_story+'")});'):"tue_back"==g?choice.setAttribute("onclick",v+"back_story();"):"tue_next"==g?choice.setAttribute("onclick",v+"go_story();"):choice.setAttribute("onclick",v+"go_to('"+g+"');"+add_sound())}else choice.setAttribute("onclick",v+"go_story(true);del_element('tue_choice');"+add_sound());function add_sound(){var e="";return arr_dialog.choice[i].sound&&(e=get_sound(arr_dialog.choice[i].sound)),arr_dialog.choice[i].sound_stop&&(e+=get_stop_sound(arr_dialog.choice[i].sound_stop)),e}tuesday.appendChild(choice)}if(del_element("tue_html_dialog"),arr_dialog.html)if(arr_dialog.html[languare]){var html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html[languare],tuesday.appendChild(html)}else{var html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html,tuesday.appendChild(html)}if(arr_dialog.variables)for(var i=0;i<arr_dialog.variables.length;i++){var choice_n=arr_dialog.variables[i][0];"add"==arr_dialog.variables[i][1]?(story_json.parameters.variables[choice_n]+=arr_dialog.variables[i][2],tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_add"))):"set"==arr_dialog.variables[i][1]&&(story_json.parameters.variables[choice_n]=arr_dialog.variables[i][2]),tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_set"))}if(arr_dialog.event&&tuesday.dispatchEvent(new Event(arr_dialog.event)),arr_dialog.sound_stop){var s=arr_dialog.sound_stop;sound_stop(s[languare]?s[languare]:s)}if(arr_dialog.sound){var s=arr_dialog.sound;sound_play(s[languare]?s[languare]:s)}arr_dialog.js&&eval(arr_dialog.js),clearTimeout(timers),arr_dialog.timer&&(timers=setTimeout(function(){"tue_go"==arr_dialog.timer[1]?go_story(!0):go_to(arr_dialog.timer[1])},arr_dialog.timer[0])),tuesday.dispatchEvent(new Event("creation_dialog"))}function values_in_text(e){arr_dialog=story_json[tue_story][scene].dialogs[dialog];var t="";e?(dialog_letter=dialog_text.length,t=dialog_text,t+=arr_dialog.text_add[languare]?arr_dialog.text_add[languare]:arr_dialog.text_add):(dialog_letter=0,t=arr_dialog.text[languare]?arr_dialog.text[languare]:arr_dialog.text);let a=t.matchAll(/<(.*?)>/g);a=Array.from(a);for(var o=0;o<a.length;o++){let e=a[o];t=t.replace(e[0],story_json.parameters.variables[e[1]])}dialog_text=t}function values_button(e){let t=e.matchAll(/<(.*?)>/g);t=Array.from(t);for(var a=0;a<t.length;a++){let o=t[a];e=e.replace(o[0],story_json.parameters.variables[o[1]])}return e}function go_story(e){if(!(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).choice||e){if(arr_dialog.go_to)go_to(arr_dialog.go_to);else dialog<story_json[tue_story][scene].dialogs.length-1?(dialog++,arr_dialog.text?"skip"==arr_dialog.text[languare]?go_story():creation_dialog():arr_dialog.text_add&&"skip"==arr_dialog.text_add[languare]?go_story():creation_dialog()):++scene>=story_json[tue_story].length?scene=story_json[tue_story].length-1:(dialog=0,creation_scene());story_json.parameters.autosave&&save_stag("auto")}}function back_story(){(arr_dialog=story_json[tue_story][scene].dialogs[dialog],del_element("tue_choice"),del_element("tue_html_dialog"),arr_dialog.back_to)?go_to(arr_dialog.back_to):dialog>0?(dialog-=1,arr_dialog.text?"skip"==arr_dialog.text[languare]?back_story():creation_dialog():arr_dialog.text_add?"skip"==arr_dialog.text_add[languare]?back_story():(dialog_text=arr_dialog.text_add[languare]?dialog_text.replace(arr_dialog.text_add[languare],""):dialog_text.replace(arr_dialog.text_add,""),dialog_text=story_json[tue_story][scene].dialogs[dialog+1].text_add[languare]?dialog_text.replace(story_json[tue_story][scene].dialogs[dialog+1].text_add[languare],""):dialog_text.replace(story_json[tue_story][scene].dialogs[dialog+1].text_add,""),creation_dialog()):(creation_dialog(),del_element("tue_choice"),del_element("tue_html_dialog"))):(scene-=1)<0?scene=0:(dialog=story_json[tue_story][scene].dialogs.length-1,creation_scene());story_json.parameters.autosave&&save_stag("auto")}function save_stag(e){localStorage.setItem("tue_"+e+"_scene",scene),localStorage.setItem("tue_"+e+"_dialog",dialog),localStorage.setItem("tue_"+e+"_story",tue_story),story_json.parameters.variables&&localStorage.setItem("tue_"+e+"_data",JSON.stringify(story_json.parameters.variables)),"bookmark"==e&&tuesday.dispatchEvent(new Event("save"))}function load_stag(e){del_element("tue_choice"),del_element("tue_html_sc"),scene=localStorage.getItem("tue_"+e+"_scene"),dialog=localStorage.getItem("tue_"+e+"_dialog"),tue_story=localStorage.getItem("tue_"+e+"_story"),story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_"+e+"_data")),creation_scene(),search_music(),tuesday.dispatchEvent(new Event("load"))}function go_to(e){del_element("tue_choice"),del_element("tue_html_dialog"),dialog=0,scene=0,tue_story=e,creation_scene()}function del_element(e){for(var t=document.getElementById("tuesday").getElementsByClassName(e),a=t.length,o=0;o<a;o++)t[0].parentNode.removeChild(t[0])}function anim_text(){0==dialog_speed?tue_text_view.innerHTML=dialog_text:0!=dialog_speed&&dialog_letter<dialog_text.length?dialog_timeout=setTimeout(add_letter,dialog_speed):dialog_letter==dialog_text.length&&(tue_text_view.innerHTML=dialog_text,tuesday.dispatchEvent(new Event("dialog_end")))}function add_letter(){tue_text_view.innerHTML=dialog_text.slice(0,dialog_letter),dialog_letter++,anim_text()}function search_music(){for(var e=scene;e>=0;e--)if(story_json[tue_story][e].background_music){tue_bg_music.canPlayType("audio/mpeg")?story_json[tue_story][e].background_music.indexOf("blob:")>-1?tue_bg_music.src=story_json[tue_story][e].background_music:story_json[tue_story][e].background_music.indexOf(".mp3")>-1?tue_bg_music.src=story_json[tue_story][e].background_music:tue_bg_music.src=story_json[tue_story][e].background_music+".mp3":tue_bg_music.src=story_json[tue_story][e].background_music+".ogg",tue_bg_music.loop=!0,tue_bg_music.play();break}}function creation_sound(){for(var e=0;Object.keys(story_json.parameters.sounds)[e];){var t=document.createElement("audio");t.preload="auto",t.id=Object.keys(story_json.parameters.sounds)[e],t.canPlayType("audio/mpeg")?story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].indexOf("blob:")>-1?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].indexOf(".mp3")>-1?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".mp3":t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".ogg",tuesday.appendChild(t),e++}}function get_sound(e){return e[languare]?"sound_play('"+e[languare]+"');":"sound_play('"+e+"');"}function get_stop_sound(e){return e[languare]?"sound_stop('"+e[languare]+"');":"sound_stop('"+e+"');"}function sound_play(e){document.getElementById(e).currentTime=0,document.getElementById(e).volume=1,document.getElementById(e).play()}function sound_stop(e){document.getElementById(e).currentTime=0,document.getElementById(e).pause()}function add_style(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head").item(0).appendChild(t)}function full_screen(){tue_fullScreen?(tue_fullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(tue_fullScreen=!0,tuesday.requestFullscreen?tuesday.requestFullscreen():tuesday.mozRequestFullScreen?tuesday.mozRequestFullScreen():tuesday.webkitRequestFullscreen?tuesday.webkitRequestFullscreen():tuesday.msRequestFullscreen&&tuesday.msRequestFullscreen())}function art_data(e){return e[languare]?"number"==typeof e[languare]?story_json.base[e[languare]-1]:e[languare]:"number"==typeof e?story_json.base[e-1]:e}function video_size(){var e=document.getElementById("tue_video"),t=tuesday.getBoundingClientRect();t.width>t.height?e.videoWidth<e.videoHeight?(e.style.height="100%",e.style.width="auto"):(e.style.height="auto",e.style.width="100%"):e.videoWidth<e.videoHeight?(e.style.height="auto",e.style.width="100%"):(e.style.height="100%",e.style.width="auto")}document.oncontextmenu=cmenu,window.onmousedown=window.onselectstart=function(){return!1},document.addEventListener("keydown",function(e){var t=e.code;if(t==story_json.parameters.key.next)go_story();else if(t==story_json.parameters.key.back)back_story();else if(t==story_json.parameters.key.main){go_to(story_json.parameters.launch_story)}else t==story_json.parameters.key.save?save_stag("bookmark"):t==story_json.parameters.key.load?load_stag("bookmark"):t==story_json.parameters.key.autosave?load_stag("auto"):t==story_json.parameters.key.full_screen&&full_screen()}); </script><script>let story_novel={"parameters":{"text_panel":{"size":["95%","25%"],"color":"#efefff","indent_text":"8px","indent_bottom":"32px","size_text":"20px","style":"border-radius:16px;","dialog_speed":"10","art":{"en":""},"position":["0","0","0",0],"font_family":"Arial"},"name_panel":{"size":["150px","48px"],"position":["0","0","-50px","0"],"size_text":"18px","art":{"en":""},"indent_text":0,"color":"#ffffff","style":"border-radius: 7px;"},"title":"new novel","launch_story":"block_1","key":{"next":"","back":"","save":"","load":"","full_screen":"","launch_story":"","load_autosave":""},"languares":["en"],"buttons":[{"name":"tue_back","style":"border-radius:26px;","position":["2.5%","0","0","32px"],"size":["38px","38px"],"color":"","size_text":"28px","text":"<","art":{"en":""},"sound":{"en":""}},{"name":"tue_next","style":"border-radius:26px;","position":["0","2.5%","0","32px"],"size":["38px","38px"],"color":"","size_text":"28px","text":">","art":{"en":""},"sound":{"en":""}}],"style_file":"","autosave":false,"font":"Arial","variables":{},"sounds":{},"characters":{"char0":{"en":"Круассан"},"char1":{"en":"Мужик"}}},"block_1":[{"background_image":"phone_1.jpg","dialogs":[{"text":"Какого хрена я тут делаю?","name":"char1","art":[{"position":["27.15%",0,"1.04%",0],"size":["63.44%","97.71%"],"url":"char/man.png","fit":"contain"}]},{"text":"Здравствуй, брат...","name":"char0","art":[{"position":[0,"-3.74%","23.54%",0],"size":["43.79%","79.17%"],"url":"char/man.png","fit":"contain"},{"position":["-33.01%",0,"6.25%",0],"size":["114.53%","122.92%"],"url":"char/negr.png","fit":"contain"}]},{"text":"Не желаешь ли ты хлеба?","name":"char0","art":[{"position":[0,"-3.74%","23.54%",0],"size":["43.79%","79.17%"],"url":"char/man.png","fit":"contain"},{"position":["-33.01%",0,"6.25%",0],"size":["114.53%","122.92%"],"url":"char/negr.png","fit":"contain"}]}]},{"background_image":"back_2.jpg","dialogs":[{"choice":[{"go_to":"block_1","position":["34.84%",0,"15.05%",0],"size":["100px","85px"],"color":"#efefff","text":{"en":"Да"},"art":{"en":""},"sound":{"en":""}},{"go_to":"block__death","position":["37.58%",0,"37.29%",0],"size":["119px","89px"],"color":"#efefff","text":{"en":"Нет"},"art":{"en":""},"sound":{"en":""}},{"go_to":"block_dep","position":["17.73%",0,0,"18.96%"],"size":["336px","104px"],"color":"#efefff","text":{"en":"Посмотреть на ребенка инвалида"},"art":{"en":""},"sound":{"en":""}}]}]}],"block__death":[{"background_image":{"en":""},"dialogs":[{"text":"Вы умерли"},{"text":"Ладно...","name":"char0","art":[{"position":["-7.62%",0,"11.67%",0],"size":["120.94%","138.33%"],"url":"char/negr.png","fit":"contain"}]}],"background_color":"#ffffff"}],"block_dep":[{"background_image":"phone_1.jpg","dialogs":[{"art":[{"position":["-33.36%",0,"-20.78%",0],"size":["149.69%","156.46%"],"url":"char/child.png","fit":"contain"}],"text":"..."},{"text":"Вы впали в депрессию","art":[{"position":["14.84%",0,"6.46%",0],"size":["91.05%","113.02%"],"url":"char/sad.png","fit":"contain"}]},{"text":"Ладно...","name":"char0","art":[{"position":["-7.62%",0,"11.67%",0],"size":["120.94%","138.33%"],"url":"char/negr.png","fit":"contain"}]}]}]};load_story('data',story_novel);</script></body></html>